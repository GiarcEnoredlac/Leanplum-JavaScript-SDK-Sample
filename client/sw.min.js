!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{var n={exports:{}};t(),e.PushServiceWorker=n.exports}}(this,function(){"use strict";var e={};self.addEventListener("push",function(t){console.log("[Service Worker] Push Received.");var n=t.data&&t.data.text()?t.data.text():null;if(!n)return void console.log("Leanplum: Push received without payload, skipping display.");var o=JSON.parse(n);if(!o||!o.title||!o.tag)return void console.log("Leanplum: No options, title or tag/id received, skipping display.");o.data&&o.data.openAction&&(e[o.tag]=o.data.openAction);var r=o.title;delete o.title,t.waitUntil(self.registration.showNotification(r,o))}),self.addEventListener("notificationclick",function(t){if(console.log("Leanplum: [Service Worker] Notification click received."),t.notification.close(),!t.notification||!t.notification.tag)return void console.log("Leanplum: No notification or tag/id received, skipping open action.");var n=t.notification.tag,o=e[n];if(!o)return void console.log("Leanplum: [Service Worker] No action defined, doing nothing.");delete e.notificationId,t.waitUntil(clients.openWindow(o))})});